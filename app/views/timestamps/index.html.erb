<%- model_class = Timestamp -%>
<div class="page-header">
  <h1>
    <%= t('.title') %>
    <% if current_user.role?(User::ROLES[:admin]) %>
      <% if params[:everyone].present? && params[:everyone].to_bool == true %>
        <%= link_to t('.title_link_yours'), params.merge(everyone: nil), :class => 'btn btn-info' %>
      <% else %>
        <%= link_to t('.title_link_all'), params.merge(everyone: true), :class => 'btn btn-info' %>
      <% end %>
    <% end %>
  </h1>
</div>

<% if @timestamps.present? %>

  <%= form_tag timestamps_path, method: 'get' do %>
    <div class="row" id="date-pickers">
      <div class="col-xs-3">
        <%= label_tag :timestamp_start_at, t('.label_start_date') %>
        <%= text_field_tag :timestamp_start_at, params[:timestamp_start_at], size: 14 %>
      </div>
      <div class="col-xs-3">
        <%= label_tag :timestamp_end_at, t('.label_start_date') %>
        <%= text_field_tag :timestamp_end_at, params[:timestamp_end_at], size: 14 %>
      </div>
      <div class="col-xs-3">
        <%= submit_tag t('.label_submit'), class: 'btn btn-default btn-sm' %>
      </div>
    </div>
  <% end %>


  <div id="pie-chart" style="min-height: 500px; margin: 0 auto;"></div>

  <hr />

  <div id="bar-chart" style="min-height: 500px; margin: 0 auto;"></div>

  <hr />

  <%= render :partial => 'timestamps/table' %>

<% else %>

  <p>
    <%= t('.no_hours') %>
    <%= link_to t('.link_add_hours'), root_path %>
  </p>

<% end %>